<div id="authModal" class="fixed inset-0 z-[60] hidden" role="dialog" aria-modal="true"
    aria-labelledby="authModalTitle">
    <div id="authModalOverlay" class="absolute inset-0 bg-black/70 backdrop-blur-sm"></div>
    <div class="relative z-10 flex min-h-full items-center justify-center px-4 py-6">
        <div class="w-full max-w-3xl farm-bg-card border farm-border rounded-2xl shadow-2xl overflow-hidden">
            <div class="flex items-center justify-between px-5 py-4 border-b farm-border farm-bg">
                <h2 id="authModalTitle" class="text-lg font-semibold farm-text">Log In</h2>
                <button id="authModalClose" class="p-2 rounded-full farm-btn farm-text-secondary focus:outline-none">
                    <span class="sr-only">Close</span>
                    <svg class="h-4 w-4" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.6">
                        <path d="M5 5l10 10M15 5L5 15" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
            <div class="px-5 pt-4 farm-bg">
                <div class="flex gap-2" role="tablist" aria-label="Authentication">
                    <button id="tab-login"
                        class="flex-1 text-sm font-semibold rounded-md px-3 py-2 border transition-colors farm-bg-light farm-text farm-border shadow"
                        type="button" role="tab" aria-selected="true" aria-controls="panel-login" tabindex="0">
                        Existing User
                    </button>
                    <button id="tab-signup"
                        class="flex-1 text-sm font-semibold rounded-md px-3 py-2 border transition-colors bg-transparent farm-text-secondary farm-border hover:farm-text"
                        type="button" role="tab" aria-selected="false" aria-controls="panel-signup" tabindex="-1">
                        Create Account
                    </button>
                </div>
            </div>
            <div class="px-5 py-5 farm-bg max-h-[70vh] overflow-y-auto">
                <div id="panel-login" class="space-y-4" role="tabpanel" aria-labelledby="tab-login" aria-hidden="false"
                    tabindex="0">
                    <form id="login-form" class="space-y-3" autocomplete="on">
                        <div class="space-y-1">
                            <label class="text-[11px] uppercase tracking-wide farm-text-secondary"
                                for="login-email">Email</label>
                            <input id="login-email" name="email" type="email" inputmode="email" autocomplete="username"
                                autocapitalize="none" spellcheck="false"
                                class="w-full rounded-md farm-input px-3 py-2 text-base" placeholder="you@example.com"
                                required />
                        </div>
                        <div class="space-y-1">
                            <label class="text-[11px] uppercase tracking-wide farm-text-secondary"
                                for="login-password">Password</label>
                            <input id="login-password" name="password" type="password" autocomplete="current-password"
                                class="w-full rounded-md farm-input px-3 py-2 text-base" placeholder="********"
                                required />
                        </div>
                        <button type="submit"
                            class="w-full btn-accent text-sm font-semibold rounded-md px-4 py-2 transition">Log
                            In</button>
                        <p id="login-error" class="text-xs text-red-400 min-h-[1rem]" aria-live="polite"></p>
                        <div class="flex items-center justify-between">
                            <button type="button" id="reset-password"
                                class="text-xs text-accent-soft hover:text-accent">Forgot
                                password?</button>
                            <p id="reset-message" class="text-[11px] text-accent-soft" aria-live="polite"></p>
                        </div>
                    </form>
                </div>
                <div id="panel-signup" class="space-y-4 hidden" role="tabpanel" aria-labelledby="tab-signup"
                    aria-hidden="true" tabindex="-1">
                    <form id="signup-form" class="space-y-3" autocomplete="on">
                        <div class="space-y-1">
                            <label class="text-[11px] uppercase tracking-wide farm-text-secondary"
                                for="signup-username">Username</label>
                            <input id="signup-username" name="username" type="text" autocomplete="username"
                                autocapitalize="none" spellcheck="false"
                                class="w-full rounded-md farm-input px-3 py-2 text-base" placeholder="Farmer" />
                        </div>
                        <div class="space-y-1">
                            <label class="text-[11px] uppercase tracking-wide farm-text-secondary"
                                for="signup-email">Email</label>
                            <input id="signup-email" name="email" type="email" inputmode="email" autocomplete="email"
                                autocapitalize="none" spellcheck="false"
                                class="w-full rounded-md farm-input px-3 py-2 text-base" placeholder="you@example.com"
                                required />
                        </div>
                        <div class="space-y-1">
                            <label class="text-[11px] uppercase tracking-wide farm-text-secondary"
                                for="signup-password">Password</label>
                            <input id="signup-password" name="password" type="password" autocomplete="new-password"
                                class="w-full rounded-md farm-input px-3 py-2 text-base" placeholder="********"
                                required />
                        </div>
                        <button type="submit"
                            class="w-full btn-accent text-sm font-semibold rounded-md px-4 py-2 transition">Create
                            Account</button>
                        <p id="signup-error" class="text-xs text-red-400 min-h-[1rem]" aria-live="polite"></p>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>